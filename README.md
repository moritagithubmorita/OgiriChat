# 大喜利チャット

## サイト概要

  制限時間内にお題に対していかに面白い回答をするかをリアルタイムチャット機能で競うサイト「OgiriChat」。
巷に蔓延る「ボケ」を謳うアプリやサイトはどれも常駐型のお題に対し、ユーザーが24時間365日好きなタイミングでボケを投稿するという形式のものがほとんど。あっても現実の大喜利大会を真似して審査員と回答者に分ける機能を実装したばっかりに、マッチメイクでなかなかマッチしないものや、そもそも素人がやるには時間制限が厳しすぎたりとどれもピンとこないものばかりだと感じていた。

  そこで今回、対決をサクサク進めるために思い切って「リアルタイムチャット」で実装することにした。評価も投稿した回答の横に表示されるいいねボタンを押すだけ。審査員の評価を待つ必要もない。回答者はただ回答を考えることに集中し、もし対戦者の回答に面白いものがあれば、押したければいいねボタンを押せばいい。回答時間は少し長めに1問2分とした。これはフジテレビのIPPONグランプリなどに比べれば大変短い時間設定(IPPONグランプリは短くて7分)だが、回答者が素人であることを考えると妥当な時間だろう。

  このアプリを使うことで、利用者は回答を素早く出す練習になるし、対戦者の存在を感じて、自身のユーモアセンスが人様に見せられるレベルのものなのかを再認識してもらい、日本全体のユーモアレベルが上がることを期待している。十分な時間があったなら、お題に難易度をもうけ、ユーザーにランクを与え、ランクマッチなども実装できればより拍車がかけられるのだが、今回は断念する。

### サイトテーマ

  「OgiriChat」は他人と自分のユーモアセンスをチャット形式で競うリアルタイム大喜利サイト。このサイトを使うことにより、日常生活での会話や他の「ボケ」を謳うアプリやサイトでは得られないような「笑い的」刺激を得られることを期待する。ここでいう笑い的刺激とは、自分のユーモアセンスと他人のユーモアセンスを比較することにより、自分に足りない部分、逆に優れている部分を認識し、自らのユーモアレベルを高めていくきっかけになる全ての刺激のことを指す。

  利用者には他人より面白い回答をより多く生み出すことを目指してもらいたい。このサイトでしか味わえない体験がそこにはあると信じている。

### テーマを選んだ理由

  世に蔓延るお笑い系のアプリやボケはどれも大喜利の本質である「素早く面白く」という部分をうまく表現できていない。そこで今回作ることにした。お笑い芸人にとどまらず、Youtubeなどで人前に出る機会の多くなった現代人にとって、ユーモアセンスの需要はより一層高くなっている。昨今では「企業の企画発案に大喜利の発想を用いよう！」なんていう話もたまに聞いたり見たりすることが増えてきた。そんな中で、お笑いの本質であり基礎でもある大喜利のサイトを用意する。これはもう需要と供給がピッタリあったと言わざるを得ない。自分自身が作りたく、世間からも求められ、しかも止めるものがない。作らないわけがない。

### ターゲットユーザ
  ターゲット属性は大きく分けて以下の3つに分類される。笑いに年齢性別は関係ない。

  - パターン１  → 素人が面白半分で投稿
  - パターン２  → 自分の力を試したいお笑いファン
  - パターン3  → 実力錬成中のセミプロ

  具体的な予想をすると、まずパターン3のセミプロはランクマッチを実装しない現段階の本サイトでは物足りなくなる可能性が高い。この層の利用者は利用者全体の1割に満たないと考えている。
  メインターゲットに据えるべき層はパターン2の「脱初心者」層。大喜利はそんなにすぐレベルの上がるものではない。それゆえに修練する場が必要であるから、実力を錬成したいという意欲のあるパターン2の利用者は長く利用しやすい状況にあると予想する。この層が全利用者の3割の人口を維持できれば御の字だと考える。
  残りの6割〜7割はライトユーザになるだろう。幸いこのサイトはじっくり評価をされることもない作りのため、１つのボケに執着せずどんどん切り捨てるようなイメージで対決を進めることができるため、ライトユーザにも優しい設計になっているのではないだろうか。

  あとはこの中に含まれていない第4の分類「パターン4」の人々。この人たちは「閲覧者」層。彼ら彼女らは自分自身がボケたいのではなく、あくまで面白い回答を見て笑いたい、面白がりたい、はたまた笑いを勉強したいというような人々である。本サイトは「大喜利をすること」がメインテーマであり本質であるから、この人たちはターゲットには含まれない。ただし、笑いというのは閲覧者がいてこそ。ということで、それを忘れないためにも一応ここに、「彼らこそ真の『笑いの担い手』である」と明記しておく。

### 主な利用シーン

通勤通学、仕事の休憩時間、主婦の休憩、塾の休憩と言ったようなスキマ時間に、大喜利対戦で自分の腕を磨きたいなと思った時。

## 設計書

### ◆ 大喜利対戦について

- お題は１ルーム１問
- 掲示板のように回答を投稿し、リアルタイムでお互いに評価する。
- 回答の横にいいねボタンが表示される
- 自分のいいねボタンも押せる。
- お題は重複しない
- 制限時間を設け、経過すると終了。
- リザルトページでは自分のボケの一覧を表示する
- お題はチャットルーム作成時に未出題のものからランダムで決定する

### ◆ マッチメイクについて

- 2 人揃った時点でマッチメイク成立とする

### ◆ 用語の定義

- ユーザー...登録済み利用者(非管理者)
- 管理者...管理者ページにアクセスできる人間
- 管理者側ページ
- ユーザ側ページ

### ◆ 各種ステータス

#### QuestionRoom
- お題ステータス(is_active)...有効(true)/無効(false)
- 出題ステータス(is_set)...出題済み(true)/未出題(false)
- ルームステータス(room_status)...enumで定義。standby(0)/matching(1)/running(2)/finished(3)
#### User
- 会員ステータス(is_active)...有効(true)/無効(false)
#### Notice
- 既読ステータス(is_readed)...既読(true)/未読(false)
#### Inquiry
- 既読ステータス(is_readed)...既読(true)/未読(false)
- 解決ステータス(is_solved)...解決(true)/未解決(false)

### ◆ ユーザーフロー

- ログインしないとトップ画面以外見れない
- ログイン → トップ → マッチメイク → 対戦画面 → ねぎらい画面 → リザルト詳細画面 → トップ

### ◆ 管理者フロー

- ログインしないとトップ画面以外見れない
- ログイン → トップ(お題一覧)→ お題追加 → お題詳細 → 一覧(トップ)

### ◆ 実装機能

- ユーザ側実装機能
  - ログイン/ログアウト/退会
  - メアドとパスワードでログイン
  - ユーザのログイン情報はActionCableで利用するためcookieに保存する。
  - メアド、名前、パスワードで登録
  - マイページで自身の情報閲覧、編集画面で編集ができる
  - 未ログインではトップ画面/ログイン/新規登録以外見れない
  - 退会でき、退会するとログインできない
  - ユーザは対戦画面で回答を複数個生成できる。0個以上上限なし。
  - 観覧機能。観覧者もナイス押せる
  - フォロー及び通知機能
  - お問い合わせフォーム。ユーザネーム、件名と本文からなる。送信ボタンでデータベースに送られる。管理者に通知。
- 管理者側実装機能
  - 回答者のアカウントはデータベースに事前に登録しておく
  - ログイン/ログアウト
  - メアドとパスワードでログイン
  - 未ログインではトップ画面/ログインしか見れない
  - 会員の情報を一覧表示、詳細表示、編集できる(有効/退会も変更可能)
  - 検索機能(「会員名」「お題」「回答」を「部分一致」で検索)
  - お題(QuestionRoom)を追加、一覧表示、詳細表示、お題編集、削除ができる
  - お問い合わせ一覧表示、詳細表示
  - 未読のお問い合わせがあるとドットを表示
- 細かいところ
  - 一覧表示を行うページは新着から表示する
- 追加機能
  - 観覧機能...対戦画面に第三者が入れる。対戦の行く末を見届けることができる。また、回答横のいいねボタンを押せる。閲覧者人数も表示する。
  - フォロー&通知機能...気に入ったユーザをフォローできる。フォローしたユーザが対戦を開始すると通知が届く。
  - お問い合わせ機能...ユーザ側に問い合わせ画面を作り、管理者側に届く仕様にする。
  - 検索機能...管理者のみの機能。問い合わせ対応のためにお題や回答を検索する。検索は「回答者名」、「お題」、「回答」の３つに対して「部分一致」で行われる。時間検索は今回は見送る。
  - 管理者のお題編集、削除...必要ないと考えていたが一応実装。削除は物理削除。

### ◆ 実装見送り機能

- 複数問出題
- 回答者チームと審査員チームに分け、３問ずつで交代する機能
- お題難易度
- トレーニングモード
- 日時検索
- ユーザランク
- ランクマッチ

## チャレンジ要素一覧

<https://docs.google.com/spreadsheets/d/1Ih8hVnbY6StXFywB7ikIzIcPBtDey1bz1mq0QQAnDaw/edit#gid=0>

## 開発環境

- OS：macOS Big Sur ver.11.4
- 言語：HTML,CSS,JavaScript,Ruby
- フレームワーク：Ruby on Rails
- JS ライブラリ：jQuery
- IDE：Cloud9

